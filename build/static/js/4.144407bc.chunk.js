(this.webpackJsonptexteditor=this.webpackJsonptexteditor||[]).push([[4],{188:function(e,t){},201:function(e,t,n){},345:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return F}));var a=n(162),r=n.n(a),o=n(164),c=n(9),i=n(15),u=n.n(i),s=n(0),l=n.n(s),m=n(1),f=n(165),d=n.n(f),p="",g=(n(191),n(125),n(195),n(124),n(196),n(197),n(198),n(199),n(158)),h=n(212),v=n(200),b=["javascript","python","java","c","cpp"];function j(e){switch(e){case"c":return"text/x-csrc";case"cpp":return"text/x-c++src";case"java":return"text/x-java";default:return e}}var E=n(14),O=n(211),w=n(344);n(201),n(202),n(203),n(204),n(206),n(207),n(126),n(208),n(209),n(210);function x(e){var t=e.text,n=e.setText,a=e.getOutput,r=e.language,o=e.output,i=e.ipChange,u=e.isCompiling,m=e.setLanguage,f=(e.displayName,e.roomName),d=e.setCursor,p=e.cursorList,E=Object(s.useState)([]),x=Object(c.a)(E,2),y=x[0],C=(x[1],Object(s.useState)("")),N=Object(c.a)(C,2),k=N[0],S=N[1],F=Object(s.useRef)();function D(){a(),console.log(k),S(o)}function P(e){m(e)}function R(e,t){var n=F.current.cursorCoords(e),a=document.createElement("span");return a.style.borderLeftStyle="solid",a.style.borderLeftWidth="2px",a.style.borderLeftColor=t,a.style.height="".concat(n.bottom-n.top,"px"),a.style.padding=0,a.style.zIndex=0,F.current.setBookmark(e,{widget:a})}return Object(s.useEffect)((function(){for(;y.length>0;){y.pop().clear()}for(var e=0;e<p.length;e++){var t=R(p[e].cursorPos,p[e].color);y.push(t)}}),[p]),l.a.createElement("div",{className:"editor-container"},l.a.createElement("div",{className:"editor-top"},"Room : ",f,l.a.createElement(O.a,{onClick:function(){alert("Invitation link copied to clipboard");var e=document.createElement("input");e.value=window.location.href,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}," Invite "),u&&l.a.createElement(O.a,{variant:"primary",disabled:!0,onClick:D},l.a.createElement(w.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),l.a.createElement("span",{className:"visually-hidden"}," Compiling...")),!u&&l.a.createElement(O.a,{variant:"primary",onClick:D},"Compile"),l.a.createElement(h.a,{title:r},b.map((function(e){return l.a.createElement(g.a.Item,{key:"dropdown-item-".concat(e),onSelect:P,eventKey:e},e)})))),l.a.createElement(v.Controlled,{className:"code-mirror-wrapper",value:t,onBeforeChange:function(e,t,a){n(a)},onCursor:function(e,t){d(t)},editorDidMount:function(e){return F.current=e},options:{lineWrapping:!0,lineNumbers:!0,lint:!0,mode:j(r),theme:"dracula",autoCloseTags:!0,matchBrackets:!0,autoCloseBrackets:!0,smartIndent:!0,colorize:!0,showHint:!0,anyword:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}}),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"exampleFormControlTextarea1",className:"labels"},"Input"),l.a.createElement("textarea",{onChange:function(e){i(e.target.value)},className:"form-control",id:"exampleFormControlTextarea1",rows:"5"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"exampleFormControlTextarea1",className:"labels"},"Output"),l.a.createElement("textarea",{value:o,className:"form-control",id:"exampleFormControlTextarea1",rows:"5"})))}var y=n(334);function C(e){var t=Object(s.useRef)(null),n=Object(s.useRef)(null),a=e.drawing,r=e.setDrawing,o=Object(s.useRef)(!1),i=["#0D0D0D","#FF0000","#FFFF00","#00FF00","#FFA500","#23C4ED"],u=Object(s.useState)(i[i.length-2]),m=Object(c.a)(u,2),f=m[0],d=m[1];function p(e,t,n,a){a.strokeStyle=n,a.beginPath(),a.moveTo(e,t)}function g(e,t,n){n.lineTo(e,t),n.stroke()}function h(e,t,n){n.clearRect(0,0,e,t),n.beginPath()}function v(e){r(e)}return Object(s.useEffect)((function(){!function(){var e=t.current,n=window.devicePixelRatio||1;e.width=window.innerWidth,e.height=window.innerHeight*n,e.style.width="".concat(window.innerWidth/n,"px"),e.style.height="".concat(window.innerHeight,"px")}(),function(){var e=t.current.getContext("2d"),a=window.devicePixelRatio||1;e.scale(a,a),e.lineCap="round",e.strokeStyle=i[i.length-2],e.lineWidth=5,n.current=e}()}),[]),Object(s.useEffect)((function(){if(0!==a.length){if(!o.current){var e=a[a.length-1],r=e.offsetX,c=e.offsetY,i=e.color,u=n.current;i?p(r,c,i,u):g(r,c,u)}}else{var s=t.current;h(s.width,s.height,n.current)}}),[a]),l.a.createElement("div",{className:"whiteboard-container"},l.a.createElement("div",{className:"whiteboard-top"},l.a.createElement(y.a,{color:f,colors:i,onChangeComplete:function(e){d(e.hex)}}),l.a.createElement(O.a,{onClick:function(){var e=t.current;h(e.width,e.height,n.current),v([])}},"Clear ")),l.a.createElement("canvas",{onMouseDown:function(e){var t=e.nativeEvent,r=t.offsetX,c=t.offsetY;p(r,c,f,n.current),o.current=!0;var i={offsetX:r,offsetY:c,color:f};v(a.concat(i))},onMouseUp:function(){o.current=!1},onMouseMove:function(e){if(o.current){var t=e.nativeEvent,r=t.offsetX,c=t.offsetY;g(r,c,n.current);var i={offsetX:r,offsetY:c};v(a.concat(i))}},ref:t}))}function N(e){var t=e.nameList;return l.a.createElement("div",null,"Participants:",l.a.createElement("ul",null,t.map((function(e,t){return l.a.createElement("li",{key:"".concat(t,"-").concat(e.displayName),style:{color:"".concat(e.color)}},e.displayName)}))))}function k(e){var t=e.roomName,n=e.displayName,a=Object(s.useRef)(),r=Object(s.useRef)(),o=Object(s.useState)([]),i=Object(c.a)(o,2),m=i[0],f=i[1],g=Object(s.useState)([]),h=Object(c.a)(g,2),v=h[0],b=h[1],j=Object(s.useState)("javascript"),O=Object(c.a)(j,2),w=O[0],y=O[1],k=Object(s.useState)(p),S=Object(c.a)(k,2),F=S[0],D=S[1],P=Object(s.useState)([]),R=Object(c.a)(P,2),L=R[0],T=R[1],I=Object(s.useState)([]),M=Object(c.a)(I,2),W=(M[0],M[1],Object(s.useState)(!1)),X=Object(c.a)(W,2),Y=X[0],B=X[1],H=Object(s.useState)([]),z=Object(c.a)(H,2),J=z[0],A=z[1],G=Object(s.useState)(""),K=Object(c.a)(G,2),U=K[0],q=K[1];function Q(){var e=[];for(var t in r.current)t!==a.current.id&&e.push({cursorPos:r.current[t].cursorPos,color:r.current[t].color});f(e)}return Object(s.useEffect)((function(){return a.current=d()("".concat(E.a,"?roomName=").concat(t,"&displayName=").concat(n)),a.current.on("list change",(function(e){r.current=e,console.log("New list state: ",r.current),Q(),function(){var e=[];for(var t in r.current)e.push({displayName:r.current[t].displayName,color:r.current[t].color});b(e)}()})),a.current.on("cursor change",(function(e){r.current[e.clientId].cursorPos=e.newCursorPos,Q()})),a.current.on("text change",(function(e){D(e)})),a.current.on("language change",(function(e){y(e),D(F)})),a.current.on("canvas change",(function(e){T(e)})),function(){console.log("Disconnecting now"),a.current.disconnect()}}),[t]),l.a.createElement("div",{className:"app-container"},l.a.createElement(x,{text:F,getOutput:function(){B(!0),u.a.post(E.a+"/code/run",{code:F,input:J,id:"fsf",lang:w}).then((function(e){q(e.data),B(!1),window.scroll({top:document.body.offsetHeight,left:0,behavior:"smooth"})})).then((function(){}))},output:U,ipChange:function(e){A(e)},isCompiling:Y,setText:function(e){D(e),a.current.emit("text change",e)},language:w,setLanguage:function(e){y(e),D(F),a.current.emit("language change",e)},displayName:n,roomName:t,setCursor:function(e){r.current[a.current.id].cursorPos=e,a.current.emit("cursor change",{clientId:a.current.id,newCursorPos:e}),Q()},cursorList:m}),l.a.createElement(C,{drawing:L,setDrawing:function(e){T(e),a.current.emit("canvas change",e)}}),l.a.createElement(N,{nameList:v}))}function S(e){var t=e.setDisplayName,n=Object(s.useState)(""),a=Object(c.a)(n,2),r=a[0],o=a[1];return l.a.createElement("form",{onSubmit:function(e){t(r)}},l.a.createElement("label",null,"Display Name:",l.a.createElement("input",{type:"text",value:r,onChange:function(e){o(e.target.value)}})))}function F(){var e=Object(m.g)().state,t=Object(m.h)().roomName,n=void 0!==e?e.passedInDisplayName:void 0,a=Object(s.useState)("loading"),i=Object(c.a)(a,2),f=i[0],d=i[1],p=Object(s.useState)(n),g=Object(c.a)(p,2),h=g[0],v=g[1];return Object(s.useEffect)((function(){var e=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("".concat(E.a,"/exists/").concat(t));case 3:200===e.sent.status?d("success"):d("error"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error on checkRoomName",e.t0),d("error");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();console.log("Checking room name"),e(t)}),[]),"loading"===f?l.a.createElement("span",null,"Loading..."):"error"===f?l.a.createElement("span",null,"404 Error: The room ",t," does not exist"):""===h||void 0===h?l.a.createElement(S,{setDisplayName:v}):l.a.createElement(k,{roomName:t,displayName:h})}}}]);
//# sourceMappingURL=4.144407bc.chunk.js.map