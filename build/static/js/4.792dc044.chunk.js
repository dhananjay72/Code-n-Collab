(this.webpackJsonptexteditor=this.webpackJsonptexteditor||[]).push([[4],{189:function(e,t){},202:function(e,t,n){},338:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return F}));var r=n(332),o=n(167),c=n(10),a=n(14),i=n.n(a),s=n(0),u=n(1),l=n(168),d=n.n(l),f={javascript:"",python:"\n# Python 3 example\ndef say_hello():\n  print('Hello, World')\n\nfor i in range(5):\n  say_hello()\n",php:'\n<?php\n\n  // Php example\n  for ( $i = 0; $i < 5; $i++) {\n    echo "Hello, World";\n  }\n?>\n',c:'\n#include <stdio.h>\n\nint main() {\n  for (int i = 0; i < 5; i++) {\n    printf("Hello, World\\n");\n  }\n  return 0;\n}\n',java:'\nimport java.io.*;\nimport java.util.*;\n\nclass Solution {\n  public static void main(String[] args) {\n    ArrayList<String> strings = new ArrayList<String>();\n    strings.add("Hello, World!");\n    strings.add("Welcome to CoderPad.");\n    strings.add("This pad is running Java " + Runtime.version().feature());\n\n    for (String string : strings) {\n      System.out.println(string);\n    }\n  }\n}\n',cpp:'\n#include <iostream>\nusing namespace std;\n\nint main() {\n  auto words = { "Hello, ", "World!", "\\n" };\n  for (const string& word : words) {\n    cout << word;\n  }\n  return 0;\n}\n'},j=(n(192),n(129),n(196),n(128),n(197),n(198),n(199),n(200),n(163)),p=n(213),m=n(201),h=["javascript","python","java","c","cpp"];function b(e){switch(e){case"c":return"text/x-csrc";case"cpp":return"text/x-c++src";case"java":return"text/x-java";default:return e}}var g=n(13),O=n(212),v=n(337),x=(n(202),n(203),n(204),n(205),n(207),n(208),n(130),n(209),n(210),n(211),n(2));function w(e){var t=e.text,n=e.setText,r=e.getOutput,o=e.language,a=e.output,i=e.ipChange,u=e.isCompiling,l=e.setLanguage,d=(e.displayName,e.roomName),f=e.setCursor,g=e.cursorList,w=Object(s.useState)([]),y=Object(c.a)(w,2),C=y[0],N=(y[1],Object(s.useState)("")),S=Object(c.a)(N,2),k=S[0],F=S[1],P=Object(s.useRef)();function D(){r(),console.log(k),F(a)}function E(e){l(e)}function L(e,t){var n=P.current.cursorCoords(e),r=document.createElement("span");return r.style.borderLeftStyle="solid",r.style.borderLeftWidth="2px",r.style.borderLeftColor=t,r.style.height="".concat(n.bottom-n.top,"px"),r.style.padding=0,r.style.zIndex=0,P.current.setBookmark(e,{widget:r})}return Object(s.useEffect)((function(){for(;C.length>0;){C.pop().clear()}for(var e=0;e<g.length;e++){var t=L(g[e].cursorPos,g[e].color);C.push(t)}}),[g]),Object(x.jsxs)("div",{className:"editor-container",children:[Object(x.jsxs)("div",{className:"editor-top",children:["Room : ",d,Object(x.jsx)(O.a,{onClick:function(){alert("Invitation link copied to clipboard");var e=document.createElement("input");e.value=window.location.href,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},children:" Invite "}),u&&Object(x.jsxs)(O.a,{variant:"primary",disabled:!0,onClick:D,children:[Object(x.jsx)(v.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),Object(x.jsx)("span",{className:"visually-hidden",children:" Compiling..."})]}),!u&&Object(x.jsx)(O.a,{variant:"primary",onClick:D,children:"Compile"}),Object(x.jsx)(p.a,{title:o,children:h.map((function(e){return Object(x.jsx)(j.a.Item,{onSelect:E,eventKey:e,children:e},"dropdown-item-".concat(e))}))})]}),Object(x.jsx)(m.Controlled,{className:"code-mirror-wrapper",value:t,onBeforeChange:function(e,t,r){n(r)},onCursor:function(e,t){f(t)},editorDidMount:function(e){return P.current=e},options:{lineWrapping:!0,lineNumbers:!0,lint:!0,mode:b(o),theme:"dracula",autoCloseTags:!0,matchBrackets:!0,autoCloseBrackets:!0,smartIndent:!0,colorize:!0,showHint:!0,anyword:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"exampleFormControlTextarea1",className:"labels",children:"Input"}),Object(x.jsx)("textarea",{onChange:function(e){i(e.target.value)},className:"form-control",id:"exampleFormControlTextarea1",rows:"5"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"exampleFormControlTextarea1",className:"labels",children:"Output"}),Object(x.jsx)("textarea",{value:a,className:"form-control",id:"exampleFormControlTextarea1",rows:"5"})]})]})}var y=n(331);function C(e){var t=Object(s.useRef)(null),n=Object(s.useRef)(null),r=e.drawing,o=e.setDrawing,a=Object(s.useRef)(!1),i=["#0D0D0D","#FF0000","#FFFF00","#00FF00","#FFA500","#23C4ED"],u=Object(s.useState)(i[i.length-2]),l=Object(c.a)(u,2),d=l[0],f=l[1];function j(e,t,n,r){r.strokeStyle=n,r.beginPath(),r.moveTo(e,t)}function p(e,t,n){n.lineTo(e,t),n.stroke()}function m(e,t,n){n.clearRect(0,0,e,t),n.beginPath()}function h(e){o(e)}return Object(s.useEffect)((function(){!function(){var e=t.current,n=window.devicePixelRatio||1;e.width=window.innerWidth,e.height=window.innerHeight*n,e.style.width="".concat(window.innerWidth/n,"px"),e.style.height="".concat(window.innerHeight,"px")}(),function(){var e=t.current.getContext("2d"),r=window.devicePixelRatio||1;e.scale(r,r),e.lineCap="round",e.strokeStyle=i[i.length-2],e.lineWidth=5,n.current=e}()}),[]),Object(s.useEffect)((function(){if(0!==r.length){if(!a.current){var e=r[r.length-1],o=e.offsetX,c=e.offsetY,i=e.color,s=n.current;i?j(o,c,i,s):p(o,c,s)}}else{var u=t.current;m(u.width,u.height,n.current)}}),[r]),Object(x.jsxs)("div",{className:"whiteboard-container",children:[Object(x.jsxs)("div",{className:"whiteboard-top",children:[Object(x.jsx)(y.a,{color:d,colors:i,onChangeComplete:function(e){f(e.hex)}}),Object(x.jsx)(O.a,{onClick:function(){var e=t.current;m(e.width,e.height,n.current),h([])},children:"Clear "})]}),Object(x.jsx)("canvas",{onMouseDown:function(e){var t=e.nativeEvent,o=t.offsetX,c=t.offsetY;j(o,c,d,n.current),a.current=!0;var i={offsetX:o,offsetY:c,color:d};h(r.concat(i))},onMouseUp:function(){a.current=!1},onMouseMove:function(e){if(a.current){var t=e.nativeEvent,o=t.offsetX,c=t.offsetY;p(o,c,n.current);var i={offsetX:o,offsetY:c};h(r.concat(i))}},ref:t})]})}function N(e){var t=e.nameList;return Object(x.jsxs)("div",{children:["Participants:",Object(x.jsx)("ul",{children:t.map((function(e,t){return Object(x.jsx)("li",{style:{color:"".concat(e.color)},children:e.displayName},"".concat(t,"-").concat(e.displayName))}))})]})}function S(e){var t=e.roomName,n=e.displayName,r=Object(s.useRef)(),o=Object(s.useRef)(),a=Object(s.useState)([]),u=Object(c.a)(a,2),l=u[0],j=u[1],p=Object(s.useState)([]),m=Object(c.a)(p,2),h=m[0],b=m[1],O=Object(s.useState)("javascript"),v=Object(c.a)(O,2),y=v[0],S=v[1],k=Object(s.useState)(f.javascript),F=Object(c.a)(k,2),P=F[0],D=F[1],E=Object(s.useState)([]),L=Object(c.a)(E,2),R=L[0],T=L[1],W=Object(s.useState)([]),H=Object(c.a)(W,2),I=(H[0],H[1],Object(s.useState)(!1)),M=Object(c.a)(I,2),X=M[0],Y=M[1],B=Object(s.useState)([]),z=Object(c.a)(B,2),A=z[0],J=z[1],$=Object(s.useState)(""),_=Object(c.a)($,2),G=_[0],K=_[1];function U(){var e=[];for(var t in o.current)t!==r.current.id&&e.push({cursorPos:o.current[t].cursorPos,color:o.current[t].color});j(e)}return Object(s.useEffect)((function(){return r.current=d()("".concat(g.a,"?roomName=").concat(t,"&displayName=").concat(n)),r.current.on("list change",(function(e){o.current=e,console.log("New list state: ",o.current),U(),function(){var e=[];for(var t in o.current)e.push({displayName:o.current[t].displayName,color:o.current[t].color});b(e)}()})),r.current.on("cursor change",(function(e){o.current[e.clientId].cursorPos=e.newCursorPos,U()})),r.current.on("text change",(function(e){D(e)})),r.current.on("language change",(function(e){S(e),D(P)})),r.current.on("canvas change",(function(e){T(e)})),function(){console.log("Disconnecting now"),r.current.disconnect()}}),[t]),Object(x.jsxs)("div",{className:"app-container",children:[Object(x.jsx)(w,{text:P,getOutput:function(){Y(!0),i.a.post(g.a+"/code/run",{code:P,input:A,id:"fsf",lang:y}).then((function(e){K(e.data),Y(!1),window.scroll({top:document.body.offsetHeight,left:0,behavior:"smooth"})})).then((function(){}))},output:G,ipChange:function(e){J(e)},isCompiling:X,setText:function(e){D(e),r.current.emit("text change",e)},language:y,setLanguage:function(e){S(e),D(P),r.current.emit("language change",e)},displayName:n,roomName:t,setCursor:function(e){o.current[r.current.id].cursorPos=e,r.current.emit("cursor change",{clientId:r.current.id,newCursorPos:e}),U()},cursorList:l}),Object(x.jsx)(C,{drawing:R,setDrawing:function(e){T(e),r.current.emit("canvas change",e)}}),Object(x.jsx)(N,{nameList:h})]})}function k(e){var t=e.setDisplayName,n=Object(s.useState)(""),r=Object(c.a)(n,2),o=r[0],a=r[1];return Object(x.jsx)("form",{onSubmit:function(e){t(o)},children:Object(x.jsxs)("label",{children:["Display Name:",Object(x.jsx)("input",{type:"text",value:o,onChange:function(e){a(e.target.value)}})]})})}function F(){var e=Object(u.g)().state,t=Object(u.h)().roomName,n=void 0!==e?e.passedInDisplayName:void 0,a=Object(s.useState)("loading"),l=Object(c.a)(a,2),d=l[0],f=l[1],j=Object(s.useState)(n),p=Object(c.a)(j,2),m=p[0],h=p[1];return Object(s.useEffect)((function(){var e=function(){var e=Object(o.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(g.a,"/exists/").concat(t));case 3:200===e.sent.status?f("success"):f("error"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error on checkRoomName",e.t0),f("error");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();console.log("Checking room name"),e(t)}),[]),"loading"===d?Object(x.jsx)("span",{children:"Loading..."}):"error"===d?Object(x.jsxs)("span",{children:["404 Error: The room ",t," does not exist"]}):""===m||void 0===m?Object(x.jsx)(k,{setDisplayName:h}):Object(x.jsx)(S,{roomName:t,displayName:m})}}}]);
//# sourceMappingURL=4.792dc044.chunk.js.map